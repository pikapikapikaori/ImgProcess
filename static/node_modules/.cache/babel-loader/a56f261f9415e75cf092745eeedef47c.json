{"remainingRequest":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/babel-loader/lib/index.js!/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue","mtime":1653675770962},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/babel.config.js","mtime":1653675770944},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/babel-loader/lib/index.js","mtime":1653547444413},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js","mtime":1653547444500}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsZVVwbG9hZCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgdXBsb2FkUmVzdWx0OiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZUF2YXRhclVwbG9hZDogZnVuY3Rpb24gYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7CiAgICAgIHZhciBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7CgogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7CiAgICAgIH0KCiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7CiAgICB9LAogICAgaGFuZGxlUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgfSwKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIHRoaXMuZmlsZU1haW50YWluLnNhdmVGaWxlTGlzdChmaWxlLm5hbWUpOwogICAgICB0aGlzLnVwbG9hZFJlc3VsdCA9IHJlczsKCiAgICAgIGlmICh0aGlzLnVwbG9hZFJlc3VsdC5jb2RlID09PSAxKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnVwbG9hZFJlc3VsdC5tc2csCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVwbG9hZFJlc3VsdC5jb2RlID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnVwbG9hZFJlc3VsdC5tc2csCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5paH5Lu25aSx6LSlJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;EACAA,kBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,YADA;MAEAC;IAFA;EAIA,CAPA;EAQAC;IACAC,kBADA,8BACAC,IADA,EACA;MACA;MACA;;MAEA;QACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAZA;IAaAC,YAbA,wBAaAD,IAbA,EAaAJ,QAbA,EAaA;MACAM;IACA,CAfA;IAgBAC,aAhBA,yBAgBAH,IAhBA,EAgBA;MACAE;IACA,CAlBA;IAmBAE,aAnBA,yBAmBAC,GAnBA,EAmBAL,IAnBA,EAmBA;MACA;MAEA;;MAEA;QACA;UACAM,8BADA;UAEAC;QAFA;MAIA,CALA,MAKA;QACA;UACAD,8BADA;UAEAC;QAFA;MAIA;IACA,CAnCA;IAoCAC,WApCA,yBAoCA;MACA;IACA;EAtCA;AARA","names":["name","data","fileList","uploadResult","methods","beforeAvatarUpload","file","handleRemove","console","handlePreview","handleSuccess","res","message","type","handleError"],"sourceRoot":"src/components/global","sources":["FileUpload.vue"],"sourcesContent":["<template>\n  <div class=\"upload\">\n    <el-upload\n        class=\"upload-demo\"\n        action=\"http://127.0.0.1:5000/file/upload\"\n        :on-preview=\"handlePreview\"\n        :on-remove=\"handleRemove\"\n        :before-upload=\"beforeAvatarUpload\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :file-list=\"fileList\"\n        list-type=\"picture\">\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n    </el-upload>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FileUpload\",\n  data() {\n    return {\n      fileList: [],\n      uploadResult: ''\n    };\n  },\n  methods: {\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {\n      this.fileMaintain.saveFileList(file.name)\n\n      this.uploadResult = res\n\n      if (this.uploadResult.code === 1) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'success'\n        });\n      } else if (this.uploadResult.code === 0) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'warning'\n        });\n      }\n    },\n    handleError() {\n      this.$message.error('上传文件失败');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.upload {\n  margin-top: 70px;\n  margin-left: 30px;\n  margin-right: 30px;\n  margin-bottom: 70px;\n}\n</style>"]}]}