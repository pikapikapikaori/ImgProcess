{"remainingRequest":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue","mtime":1653675770962},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/babel-loader/lib/index.js","mtime":1653547444413},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js","mtime":1653547444500}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsZVVwbG9hZCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgdXBsb2FkUmVzdWx0OiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7CiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflj6rog73mmK8gSlBHIOagvOW8jyEnKTsKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpOwogICAgfSwKICAgIGhhbmRsZVByZXZpZXcoZmlsZSkgewogICAgICBjb25zb2xlLmxvZyhmaWxlKTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLmZpbGVNYWludGFpbi5zYXZlRmlsZUxpc3QoZmlsZS5uYW1lKQoKICAgICAgdGhpcy51cGxvYWRSZXN1bHQgPSByZXMKCiAgICAgIGlmICh0aGlzLnVwbG9hZFJlc3VsdC5jb2RlID09PSAxKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnVwbG9hZFJlc3VsdC5tc2csCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnVwbG9hZFJlc3VsdC5jb2RlID09PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLnVwbG9hZFJlc3VsdC5tc2csCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVycm9yKCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDmlofku7blpLHotKUnKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileUpload.vue","sourceRoot":"src/components/global","sourcesContent":["<template>\n  <div class=\"upload\">\n    <el-upload\n        class=\"upload-demo\"\n        action=\"http://127.0.0.1:5000/file/upload\"\n        :on-preview=\"handlePreview\"\n        :on-remove=\"handleRemove\"\n        :before-upload=\"beforeAvatarUpload\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :file-list=\"fileList\"\n        list-type=\"picture\">\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n    </el-upload>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FileUpload\",\n  data() {\n    return {\n      fileList: [],\n      uploadResult: ''\n    };\n  },\n  methods: {\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {\n      this.fileMaintain.saveFileList(file.name)\n\n      this.uploadResult = res\n\n      if (this.uploadResult.code === 1) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'success'\n        });\n      } else if (this.uploadResult.code === 0) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'warning'\n        });\n      }\n    },\n    handleError() {\n      this.$message.error('上传文件失败');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.upload {\n  margin-top: 70px;\n  margin-left: 30px;\n  margin-right: 30px;\n  margin-bottom: 70px;\n}\n</style>"]}]}