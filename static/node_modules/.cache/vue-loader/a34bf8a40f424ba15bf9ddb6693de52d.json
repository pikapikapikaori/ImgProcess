{"remainingRequest":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue?vue&type=style&index=0&id=74af3c49&scoped=true&lang=css&","dependencies":[{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/src/components/global/FileUpload.vue","mtime":1653675770962},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/css-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1653547444691},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/postcss-loader/src/index.js","mtime":1653547444405},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/cache-loader/dist/cjs.js","mtime":1653547444000},{"path":"/Users/pikapikapi/Library/Mobile Documents/com~apple~CloudDocs/Documents/python/ImgProcess/static/node_modules/vue-loader/lib/index.js","mtime":1653547444500}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudXBsb2FkIHsKICBtYXJnaW4tdG9wOiA3MHB4OwogIG1hcmdpbi1sZWZ0OiAzMHB4OwogIG1hcmdpbi1yaWdodDogMzBweDsKICBtYXJnaW4tYm90dG9tOiA3MHB4Owp9Cg=="},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA","file":"FileUpload.vue","sourceRoot":"src/components/global","sourcesContent":["<template>\n  <div class=\"upload\">\n    <el-upload\n        class=\"upload-demo\"\n        action=\"http://127.0.0.1:5000/file/upload\"\n        :on-preview=\"handlePreview\"\n        :on-remove=\"handleRemove\"\n        :before-upload=\"beforeAvatarUpload\"\n        :on-success=\"handleSuccess\"\n        :on-error=\"handleError\"\n        :file-list=\"fileList\"\n        list-type=\"picture\">\n      <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n      <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n    </el-upload>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FileUpload\",\n  data() {\n    return {\n      fileList: [],\n      uploadResult: ''\n    };\n  },\n  methods: {\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === 'image/jpeg';\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG 格式!');\n      }\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n      return isJPG && isLt2M;\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleSuccess(res, file) {\n      this.fileMaintain.saveFileList(file.name)\n\n      this.uploadResult = res\n\n      if (this.uploadResult.code === 1) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'success'\n        });\n      } else if (this.uploadResult.code === 0) {\n        this.$message({\n          message: this.uploadResult.msg,\n          type: 'warning'\n        });\n      }\n    },\n    handleError() {\n      this.$message.error('上传文件失败');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.upload {\n  margin-top: 70px;\n  margin-left: 30px;\n  margin-right: 30px;\n  margin-bottom: 70px;\n}\n</style>"]}]}